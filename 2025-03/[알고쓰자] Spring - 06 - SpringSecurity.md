# ğŸƒ Intro

ë‹¤ì‹œ ëŒì•„ì™”ìŠµë‹ˆë‹¤. ë²Œì¨ ì—¬ì„¯ë²ˆì§¸ ì‹œë¦¬ì¦ˆë¥¼ ë‹¤ë£¨ê³  ìˆêµ°ìš”.
ë‹¤ì„¯ë²ˆì˜ ì‹œë¦¬ì¦ˆ ë™ì•ˆ Spring ì˜ ê¸°ì´ˆ ì›ë¦¬ë¥¼ ì´ì•¼ê¸° í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. ê°„ê°„íˆ ê°ì²´ì§€í–¥ì— ëŒ€í•œ ì´ì•¼ê¸°ë„ ë‚˜ëˆ´ì£ .

ì´ë²ˆ í¸ ë¶€í„°ëŠ” Spring ìƒíƒœê³„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“ˆë“¤ì„ í•˜ë‚˜í•˜ë‚˜ ì†Œê°œ í•´ë“œë¦´ê¹Œ í•©ë‹ˆë‹¤. ì´ë²ˆ í˜¸ì—ì„œëŠ” ê°œì¸ì ìœ¼ë¡  Spring ì„ ë°°ìš¸ ë•Œ ê½¤ë‚˜ ì§„ì…ì¥ë²½ì´ ë†’ì•˜ë˜ Spring Security ë¥¼ ë‹¤ë¤„ë³¼ê¹Œ í•©ë‹ˆë‹¤.

> ê¸€ì„ ì“°ë©´ì„œë„ ì¡°ê¸ˆ ë‘ë µìŠµë‹ˆë‹¤. Spring Security ë¥¼ ì²˜ìŒ ì“¸ ë•Œì™€ ì§€ê¸ˆì˜ ìƒê°ì€ ë§ì´ ë³€í–ˆì£ ...ëœ¯ì–´ë³´ë©´ ë³¼ ìˆ˜ë¡ ì‰½ì§€ ì•Šë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤.

ì´ë²ˆ í˜¸ë„ í˜ì°¨ê²Œ ì‹œì‘ í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì»¤í”¼ í•œì”ê³¼ í•¨ê»˜ ì¦ê²¨ì£¼ì„¸ìš” â˜•.

# ğŸ”’ ì¼ë°˜ì ìœ¼ë¡œ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš” í•œ ë³´ì•ˆ ê¸°ëŠ¥ë“¤

ë³´í†µ ì›¹ì‚¬ì´íŠ¸ì— ëŒ€í•œ ì˜ˆì‹œë¥¼ ë“¤ ë•Œ ì‡¼í•‘ëª°ì´ ë§ì´ ë‚˜ì˜¤ì£ . ê·¸ ë§Œí¼ ë§ì´ ì‚¬ìš©í•˜ì‹œë‹ˆ ê³µê°ëŒ€ê°€ ë†’ì•„ì„œë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

> ì•¼ë°¤ì— í•¸ë“œí° ë³¼ ë•Œ ì¶©ë™êµ¬ë§¤ ë‹¨ í•œë²ˆë„ ì•ˆí•´ë³´ì‹  ë¶„ì´ ê³„ì‹œë‹¤ë©´, ë¬´ì—‡ì„ í•˜ë”ë¼ë„ ì„±ê³µí•˜ì‹¤ ë¶„ì´ë‹ˆ ì¹œí•˜ê²Œ ì§€ë‚´ì‹œê¸° ë°”ëë‹ˆë‹¤. 

ìš°ë¦¬ëŠ” ì‡¼í•‘ëª°ì— ë¡œê·¸ì¸ì„ í•´ì„œ ê²°ì œë¥¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡  ê·¸ë ‡ì£ . íŒë§¤ë¥¼ í•˜ì‹œëŠ” ë¶„ì´ë¼ë©´, íŒë§¤ìì˜ ì •ë³´ë“¤ì´ ì‡¼í•‘ëª°ì— ì‘ì„±ë˜ê² ì£ . 

ì´ ëª¨ë“  í–‰ìœ„ë“¤ì€ íƒ€ì¸ì˜ ê·€ì† ìì‚°ì´ ì•„ë‹Œ ê°œì¸ ì •ë³´ë¥¼ í†µí•´ ì´ë¤„ì§‘ë‹ˆë‹¤. ì¦‰, ì´ ì •ë³´ë“¤ì´ ë…¸ì¶œëœë‹¤ë©´ ìš°ë¦¬ê°€ ì›í•˜ì§€ ì•ŠëŠ” ìƒí™©ë“¤ì´ ë°œìƒí•  ìˆ˜ ìˆì£ . ì›¹ ì„œë¹„ìŠ¤ë“¤ì€ ê³ ê°ì„ ìœ„í•œ ë³´ì•ˆ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ìˆìŠµë‹ˆë‹¤. 

ìš°ì„  ì•”í˜¸í™” ê¸°ëŠ¥ì´ í•„ìš”í•©ë‹ˆë‹¤. ê°œì¸ì •ë³´ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•´ì„œ ì €ì¥í•´ì•¼ í•˜ë‹ˆê¹Œìš”. ë˜í•œ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì²´í¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë“¤ì´ í•„ìš”í•©ë‹ˆë‹¤. ì–´ë–¤ ì„œë¹„ìŠ¤ëŠ” ìœ ì €ì˜ ê¶Œí•œì— ë”°ë¼ íŠ¹ì • ë°ì´í„°ì— ëŒ€í•œ ì ‘ê·¼ì„ ë§‰ì•„ì•¼í•˜ì£ . ì´ë¥¼ í”íˆ ë§í•´ì„œ ì¸ì¦, ì¸ê°€ ê¸°ëŠ¥ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. 

ê·¸ ì™¸ì—ë„ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì´ ìˆì£ . Google ë¡œê·¸ì¸ ê³¼ ê°™ì€ ê¸°ëŠ¥ë„ í•„ìš”í•©ë‹ˆë‹¤. ëˆ„êµ°ê°€ëŠ” ê³„ì •ì„ ì—¬ëŸ¬ ê°œë¥¼ ìƒì„±í•˜ëŠ” ë° í”¼ë¡œê°ì„ ëŠë‚„ ìˆ˜ë„ ìˆìœ¼ë‹ˆê¹Œìš”. 

ì´ ëª¨ë“  ê¸°ëŠ¥ë“¤ì€ ìœ ì €ë§ˆë‹¤ ì—­í• ì„ ë¶„ë¥˜í•˜ê³  ê°œì¸ì˜ ë°ì´í„°ë¥¼ ì§€í‚¤ëŠ”ë° ì˜ë¯¸ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê¸°ëŠ¥ë“¤ì´ ì—†ë‹¤ë©´ ì„œë¹„ìŠ¤ëŠ” ì¤‘êµ¬ë‚œë°©ì´ ë˜ê² ì£ . ìµœì†Œí•œ ê³„ì • ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìœ ì €ì—ê²Œ ë¡œê·¸ì¸ì„ ìš”êµ¬í•˜ëŠ” ì„œë¹„ìŠ¤ë¼ë©´ ë§ì´ì£ . ë‹¨ìˆœ ì¡°íšŒ ì„œë¹„ìŠ¤, ì •ì  í˜ì´ì§€ì—ì„œëŠ” ë¶ˆí•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

# ğŸ§ ìš°ë¦¬ê°€ í•  ìˆ˜ ìˆëŠ” ì„ íƒì§€

ë‹¹ì—°í•˜ê²Œë„ ëª¨ë“  ê¸°ëŠ¥ë“¤ì„ ì§ì ‘ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. í•™ë¶€ ì‹œì ˆë¡œ ê¸°ì–µì„ ë˜ëŒë ¤ ë³´ê² ìŠµë‹ˆë‹¤. ì „ í•™ë¶€ì—ì„œ ì›¹ í”„ë¡œê·¸ë˜ë°ì— ëŒ€í•´ ë°°ìš¸ ë•Œ JSP ì™€ Servlet ì„ ì‚¬ìš©í–ˆì—ˆìŠµë‹ˆë‹¤. íŠ¹ë³„íˆ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì£ . í•™ë¶€ ì‹œì ˆ ì—´ì— ì—´ì€ ê¼­ í•´ ë³´ëŠ” ê²Œì‹œíŒ ì„œë¹„ìŠ¤ ê°œë°œì—ì„œ JSP, Servlet ì„ í†µí•´ ë¡œê·¸ì¸ì„ êµ¬í˜„í–ˆë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤. 

ì˜ ì™€ë‹«ì§€ ì•Šìœ¼ì‹¤ ê²ƒ ê°™ì•„ì„œ ì˜ˆì‹œë¥¼ í•˜ë‚˜ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì„ ì½ìœ¼ì‹œëŠ” ë¶„ë“¤ ì¤‘ì—ì„  í”„ë ˆì„ì›Œí¬ ë¶€í„° ì‹œì‘í•˜ì‹  ë¶„ë„ ë¶„ëª… ê³„ì‹¤í…Œë‹ˆê¹Œìš”. 

> í•™ë¶€ ìˆ˜ì—…ì‹œê°„ì—” ì›ë¡ ì ì¸ ë‚´ìš©ì´ ìš°ì„ ì´ë‹¤ë³´ë‹ˆ ë‚  Servlet ë¶€í„° ê³µë¶€í–ˆë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤. ğŸ˜
>  
> ë‹¹ì‹œì—” ê³ í†µìŠ¤ëŸ¬ì› ì§€ë§Œ ì§€ê¸ˆ ì½”ë“œë“¤ì„ ë‹¤ì‹œ ë³´ë‹ˆ ì¶”ì–µì´ë„¤ìš”. ğŸ‘

```bash
jsp-servlet-login/
â”‚â”€â”€ WebContent/
â”‚   â”œâ”€â”€ index.jsp       (ë¡œê·¸ì¸ í¼)
â”‚   â”œâ”€â”€ welcome.jsp     (ë¡œê·¸ì¸ ì„±ê³µ í˜ì´ì§€)
â”‚   â”œâ”€â”€ error.jsp       (ë¡œê·¸ì¸ ì‹¤íŒ¨ í˜ì´ì§€)
â”‚â”€â”€ src/
â”‚   â”œâ”€â”€ LoginServlet.java (ë¡œê·¸ì¸ ì²˜ë¦¬ ì„œë¸”ë¦¿)
â”‚â”€â”€ web.xml             (ì„œë¸”ë¦¿ ë§¤í•‘)
```
ê°„ë‹¨í•˜ê²Œ ì´ëŸ° êµ¬ì¡°ì˜ í˜ì´ì§€ê°€ ì¡´ì¬í•œë‹¤ê³  ê°€ì • í•´ ë³´ê² ìŠµë‹ˆë‹¤. 

web.xml ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
```xml
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         version="3.0">
    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>LoginServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/login</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>LogoutServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/logout</url-pattern>
    </servlet-mapping>
</web-app>

```

index.jsp ì—ì„œ ìœ ì € ì •ë³´ë¥¼ ì…ë ¥í•œ í›„ ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ë‚¸ë‹¤ë©´, 

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Login Page</title>
</head>
<body>
    <h2>Login</h2>
    <form action="login" method="post">
        <label>Username:</label>
        <input type="text" name="username" required>
        <br>
        <label>Password:</label>
        <input type="password" name="password" required>
        <br>
        <input type="submit" value="Login">
    </form>
</body>
</html>

```
request íŒŒë¼ë¯¸í„°ì—ì„œ ìœ ì € ì •ë³´ë¥¼ ë°›ì•„ì˜¨ í›„, ì¸ì¦ ë¡œì§ì´ ì„±ê³µí•œë‹¤ë©´ ì„¸ì…˜ ì •ë³´ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤. 

```java
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet("/login")
public class LoginServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        String username = request.getParameter("username");
        String password = request.getParameter("password");

        // ê°„ë‹¨í•œ í•˜ë“œì½”ë”©ëœ ìœ ì € ê²€ì¦ (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” DBë¥¼ ì‚¬ìš©í•´ì•¼ í•¨)
        if ("admin".equals(username) && "1234".equals(password)) {
            HttpSession session = request.getSession();
            session.setAttribute("user", username);
            response.sendRedirect("welcome.jsp");
        } else {
            response.sendRedirect("error.jsp");
        }
    }
}
```
welcome.jsp ì—ì„œëŠ” ì„¸ì…˜ì— ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ë‹¤ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚¤ê³ , ìˆë‹¤ë©´ ë¡œê·¸ì¸ í•œ ìœ ì €ì •ë³´ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. 
```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="javax.servlet.http.HttpSession" %>
<html>
<head>
    <title>Welcome</title>
</head>
<body>
    <h2>Welcome Page</h2>
    <%
        HttpSession sessionObj = request.getSession(false);
        if (sessionObj != null && sessionObj.getAttribute("user") != null) {
    %>
        <p>Welcome, <%= sessionObj.getAttribute("user") %>!</p>
        <a href="logout">Logout</a>
    <%
        } else {
            response.sendRedirect("index.jsp");
        }
    %>
</body>
</html>
```
ì´ì²˜ëŸ¼ java servlet ë§Œ ê°€ì§€ê³ ë„ ì‹¬í”Œí•˜ê²Œ ë¡œê·¸ì¸ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ìƒê°ë³´ë‹¤ ìš°ë¦¬ì—ê²Œ ìš”êµ¬ë˜ëŠ” ë³´ì•ˆ ìš”ê±´ë“¤ì´ ë‹¤ì–‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì˜ˆì‹œì—ëŠ” ì•”ë³µí˜¸í™” ë¡œì§ì´ ì—†ì£ . ê°„ë‹¨í•œ ì˜ˆì‹œë¼ JDBC ì»¤ë„¥ì…˜ ë˜í•œ ë”°ë¡œ ë§ºê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. 

ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” ë° í•„ìš”í•œ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ì´ë ‡ê²Œ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ, ì‚¬ì‹¤ íŒ¨í„´ë“¤ì´ í•˜ë‚˜ê°™ì´ ì •í˜•í™” ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì „ë‹¬ë°›ì•„ ìœ ì €ë¥¼ ê²€ì¦í•˜ëŠ” íŒ¨í„´ì´ ì„œë¹„ìŠ¤ë§ˆë‹¤ ì‚¬ì‹¤ í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šì£ . 

ë§Œì•½ ì´ëŸ° ì •í˜•í™”ëœ ê¸°ëŠ¥ì— ëŒ€í•´ í° ì‹œê°„ì„ ë“¤ì´ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì„ íƒì§€ë„ ìˆìŠµë‹ˆë‹¤. Spring Security ê°€ ê·¸ ì˜ˆì‹œì£ . 

# ğŸƒ Spring Security ê°œìš”

Spring Security ëŠ” Spring ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì—¬ëŸ¬ ë³´ì•ˆ ê¸°ëŠ¥ë“¤ì„ êµ¬í˜„í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.  
í”„ë ˆì„ì›Œí¬ì´ë‹ˆê¹Œ ë§‰ìƒ ëª¨ë“  ê¸°ëŠ¥ë“¤ì´ ë‹¤ êµ¬í˜„ë˜ì–´ìˆì§€ëŠ” ì•Šê² ì§€ë§Œ, ì•ì„œ ë³´ì—¬ë“œë¦° ë‚  JSP, Servlet ì½”ë“œì— ë¹„í•˜ë©´ êµ¬í˜„í•  ê²Œ ì¤„ì£ .  

ë¬¼ë¡  JSP + Spring ì¡°í•©ì—ì„œë„ ë§ì´ ì“°ì…ë‹ˆë‹¤. Spring ì€ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ëŠ” ë° í•„ìš”í•œ ë§ì€ ë„êµ¬ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤. ê·¸ ì¤‘ì—ì„  Servlet ë„ ë‹¹ì—°íˆ í¬í•¨ ë˜ì–´ìˆì£ . ì¸ì¦ ë° ì¸ê°€ ì²˜ë¦¬ì— í•„ìš”í•œ ë„êµ¬ ë¿ë§Œ ì•„ë‹ˆë¼ ì•”í˜¸í™” ë„êµ¬ë“¤ë„ ì œê³µ í•©ë‹ˆë‹¤. 

ë‹¤ì‹œ ê³¼ê±°ë¡œ ê¸°ì–µì„ ë˜ëŒë ¤ JSP + Spring ë§Œ ê°€ì§€ê³  ì›¹ì„ ê°œë°œí•œë‹¤ê³  ê°€ì • í•´ ë³´ê² ìŠµë‹ˆë‹¤. ì—¬ì „íˆ ì¸ì¦, ì¸ê°€ ë“±ì˜ ê¸°ëŠ¥ì€ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. 

ì•ì„œ ë§ì”€ë“œë ¸ë‹¤ì‹œí”¼ ì´ëŸ° ê¸°ëŠ¥ë“¤ì€ ì‚¬ì‹¤ ì •í˜•í™” ë˜ì–´ìˆëŠ” ê¸°ëŠ¥ë“¤ì…ë‹ˆë‹¤. 10 ëª…ì˜ ê°œë°œìì—ê²Œ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦, ì¸ê°€ë¥¼ êµ¬í˜„í•˜ë¼ê³  í•˜ë©´ ëŒ€ë¶€ë¶„ì€ ì•„ë˜ì˜ íŒ¨í„´ì„ ë”°ë¥¼ê²ë‹ˆë‹¤. 

1. ì¸ì¦ì„ ë°›ëŠ” ì‹œì (Servlet ì‹œì ), ë˜ëŠ” ì¸ì¦ì´ í•¸ë“¤ëŸ¬ë¡œ ì „ë‹¬ ëœ ì‹œì  (Controller ì‹œì ) ì—ì„œ HttpServletRequest ë‚´ì˜ ì„¸ì…˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤. 
2. ì„œë²„ ë‚´ì— ì €ì¥ ëœ ì„¸ì…˜ ì •ë³´ì™€ ë¹„êµí•œë‹¤. 
3. í†µê³¼ í˜¹ì€ ì œí•œ

1ë²ˆì—ì„œ ì‹œì ì„ ë‘ê°€ì§€ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. Spring MVC ì˜ êµ¬ì¡°ì—ì„œëŠ” `Controller` í•¸ë“¤ëŸ¬ë³´ë‹¤ ì•ë‹¨ì— `Dispatcher Servlet` ì´ ì¡´ì¬í•˜ë‹ˆê¹Œìš”. 
ì‚¬ì‹¤ ìš”ì²­ ìì²´ê°€ ì´ì¯¤ì—ì„œ ê±¸ëŸ¬ì§€ëŠ” ê²Œ ê°€ì¥ ì´ìƒì ì…ë‹ˆë‹¤. Controller ê°ì²´ì˜ ì±…ì„ì´ ìœ ì € ì¸ì¦ ì¸ê°€ ê¹Œì§€ ê°€ì§€ê³  ìˆê²Œ ëœë‹¤ë©´, AOP ë¥¼ í†µí•´ ë˜ í•˜ë‚˜ì˜ íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ì „ì—­ Controller ì— êµ¬í˜„í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

ë¬¼ë¡  `AOP` ë¡œ êµ¬í˜„í•˜ëŠ” ê±´ ì¢‹ì€ ì„ íƒì§€ ì…ë‹ˆë‹¤. `Controller` ê°€ ê°€ì ¸ì•¼ í•  ê´€ì‹¬ì‚¬ê°€ ì¸ì¦, ì¸ê°€ë¼ê³  ê²°ì •í–ˆë‹¤ë©´ ë§ì´ì£ . `Controller` ë‹¨ì—ì„œ ì‘ì„±í•´ì•¼ í•  ì½”ë“œê°€ ìƒë‹¹íˆ ì¤„ì–´ë“¤ê² ì£ .  

í•˜ì§€ë§Œ, ì´ ê²½ìš°ì—” ëª¨ë“  ìš”ì²­ì´ ì¼ë‹¨ì€ í†µê³¼ëœë‹¤ëŠ” ë¬¸ì œì ì´ ìƒê¹ë‹ˆë‹¤. ìš°ì„ ì€ ìš”ì²­ ìì²´ê°€ í†µê³¼ ë˜ì—ˆê¸° ë•Œë¬¸ì— `Handler Adapter` ê°€ ë™ì‘ì„ í•˜ì£ . **ì´ ìƒí™© ìì²´ê°€ ë¬¸ì œê°€ ëœë‹¤ê³  íŒë‹¨í–ˆë‹¤ë©´, ì¸ì¦ ë° ì¸ê°€ì˜ ì±…ì„ì„ `Controller` ì—ê²Œ ì¤˜ì„œëŠ” ì•ˆëë‹ˆë‹¤.** 

`Servlet Filter` ë¼ëŠ” í‚¤ì›Œë“œê°€ ë– ì˜¬ëë‹¤ë©´, Spring Security ë¥¼ ë„ì… í•´ ë³´ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Security ëŠ” `Controller` ì˜ì—­ì—ì„œ ì¸ì¦ ë° ì¸ê°€ì˜ ê²€ì¦ ì±…ì„ì„ ëœì–´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. 

ì´í›„ì— ì–¸ê¸‰í•˜ê² ì§€ë§Œ, Spring Security ëŠ” Servlet Filter ì˜ì—­ì—ì„œ ë™ì‘í•©ë‹ˆë‹¤. Servlet Filter ì˜ì—­ì—ì„œ í—ˆê°€ë°›ì§€ ì•Šì€ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤ë©´, Controller ì˜ì—­ì—ì„œëŠ” ì´ëŸ° ìš”ì²­ì— ëŒ€í•´ ì „í˜€ ì‹ ê²½ì“°ì§€ ì•Šì•„ë„ ì¢‹ìŠµë‹ˆë‹¤. ì–´ì°¨í”¼ ì˜¬ ì¼ì´ ì—†ì„í…Œë‹ˆê¹Œìš”. 

# ğŸ•¸ï¸ Spring Security êµ¬ì¡°

Spring Security ëŠ” ì—„ë°€íˆ ë§í•˜ìë©´ Spring ì— í¬í•¨ ë˜ì–´ìˆëŠ” ëª¨ë“ˆì´ë¼ê³  ë§ í•˜ê¸°ëŠ” ì–´ë µìŠµë‹ˆë‹¤. Spring Security ê°€ Spring ì˜ ì˜ì—­ ë‚´ë¶€ì— ìˆë‹¤ê³  ë§ í• ìˆ˜ëŠ” ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 

í•˜ì§€ë§Œ Spring ë‚´ì˜ Bean ë“¤ì„ Servlet ì˜ì—­ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. DelegatingFilterProxy ë¥¼ í†µí•´ì„œ ë§ì´ì£ . 

[FilterChain ì´ë¯¸ì§€]()

Spring ì˜ FilterChain ì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ê³¼ ë‚˜ê°€ëŠ” ì‘ë‹µì„ ì—¬ëŸ¬ ë‹¨ê³„ì˜ í•„í„°ë¥¼ í†µí•´ ì²˜ë¦¬í•˜ë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ìš°ë¦¬ê°€ FilterChain ì— ì»¤ìŠ¤í…€ Filter ë¥¼ ë„£ì„ ìˆ˜ë„ ìˆì£ . 

Spring Security ë¥¼ ì„¤ì •í•˜ë©´ ì´ FilterChain ì˜ì—­ì— DelegatingFilterProxy ë¥¼ í†µí•´ Security ì˜ FilterChainProxy ë¥¼ ì—°ê²° ì‹œí‚µë‹ˆë‹¤. í•´ë‹¹ FilterChainProxy ë¥¼ í†µí•´ ì‹¤ì œë¡œëŠ” ì™¸ë¶€ì— ë°°ì¹˜ ë˜ì–´ìˆëŠ” SecurityFilterChain ì´ ë§ˆì¹˜ FilterChain ë‚´ì— ì¡´ì¬í•˜ëŠ” ê²ƒ ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

DelegatingFilterProxy ë¥¼ í†µí•´ FilterChain ì—ì„œ SecurityFilterChain ìœ¼ë¡œ ìš”ì²­ì´ ì˜¬ íƒ€ì´ë°ì— Spring ì˜ ì˜ì—­ì˜ ìì›ë“¤ (Beans ë“¤) ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ IoC ì»¨í…Œì´ë„ˆì—ì„œ DI ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¨ ì˜ë¯¸ì£ . 

ì´ë¥¼ í†µí•´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” Filter ë¥¼ FilterChain ë‚´ì— ì»¤ìŠ¤í…€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

[SecurityFilterChain ì´ë¯¸ì§€]()

Security FilterChain ì€ 11ê°œ ì˜ ê¸°ë³¸ í•„í„°ë¡œ ì´ë¤„ ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ í•„í„°ë“¤ ê°ê°ì´ ë³¸ì¸ì˜ ì—­í• ë“¤ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ê·¸ë¦¼ì—ì„œëŠ” í•„í„° ê°ê°ì´ ê°ìì˜ ì—­í• ì„ ìˆ˜í–‰í•´ì•¼ í•  ë•Œ í˜¸ì¶œí•˜ëŠ” ê°ì²´ë“¤ì„ í™”ì‚´í‘œë¡œ ì´ì–´ ë³´ì•˜ìŠµë‹ˆë‹¤. 

ê°ê°ì˜ í•„í„°ë“¤ì€ ìì‹ ë“¤ì˜ ì—­í• ì´ ì£¼ì–´ì¡Œì„ ë•Œ ì¡°ê±´ì— ë”°ë¼ í™”ì‚´í‘œë¡œ ì—°ê²° ëœ ì»´í¬ë„ŒíŠ¸ë“¤ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. 

FilterChain ë‚´ì˜ ê¸°ë³¸ í•„í„°ë“¤ì€ ê°œë°œìê°€ ì»¤ìŠ¤í…€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ì˜ˆ í•´ë‹¹ í•„í„°ì˜ ìë¦¬ë¥¼ ëŒ€ì²´í•  ìˆ˜ë„ ìˆê³ , ì• ë’·ë‹¨ì— í•„í„°ë¥¼ ë°°ì¹˜í•  ìˆ˜ë„ ìˆì£ . 

ì´ ì„¤ì •ì€ filterChain ì„¤ì •ì—ì„œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Security 5.7 ì „ì—ëŠ” WebSecurityConfigurerAdapter ë¥¼ ìƒì† ì¸ê°€ ë°›ì•„ì„œ SecurityFilterChain ì„ êµ¬ì„± í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤. `configure` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ì—ˆì£ . 

í•˜ì§€ë§Œ ìµœì‹  Spring Security ë¶€í„°ëŠ” SecurityFilterChain ê·¸ ìì²´ë¥¼ `@Bean` ìœ¼ë¡œ ì„ ì–¸ í•´ì•¼ í•©ë‹ˆë‹¤. 

```kotlin
@Bean
fun filterChain(http : HttpSecurity) : SecurityFilterChain {
    return http.authorizeHttpRequests((authz) -> authz.anyRequest().authenticated())
        .httpBasic(withDefaults())
        .build()
}
```
ì²˜ìŒì— Spring Security ë¥¼ ì…ë¬¸í•  ë•Œ ë´¤ë˜ êµì¬ì—ì„œ WebSecurityConfigurerAdapter ë¥¼ ì‚¬ìš© í–ˆì—ˆëŠ”ë°, ê·¸ ë‹¹ì‹œì— ë§‰ Spring Boot 3.0 ì´ ë¦´ë¦¬ì¦ˆ ë˜ì—ˆë˜ ì‹œê¸°ì˜€ì„ ê²ë‹ˆë‹¤. 2022ë…„ ì¤‘ìˆœ ì¯¤ì´ì—ˆì£ . ìµœì‹ ë²„ì „ì— ìµìˆ™í•´ì§€ê² ë‹¤ê³  ì—´ì‹¬íˆ ì»¨í”½ë“¤ì„ Bean ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ì •í–ˆë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤. ìƒê°ë³´ë‹¤ëŠ” í• ë§Œ í–ˆì–´ìš”. 

ì‚¬ì‹¤ SecurityFilterChain ë³´ë‹¤ ê·¸ ë‹¹ì‹œì—” Bean ìœ¼ë¡œ ë“±ë¡í•´ì•¼í–ˆë˜ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì˜ ì´í•´ê°€ ì•ˆë˜ì—ˆì—ˆì£ . AuthenticationProvider ë“±ì˜ ì—­í• ì´ ì •í™•íˆ ì–´ë–¤ ì§€ ì˜ ëª°ëê³ , ì™œ ì„ ì–¸í•´ì•¼ í•˜ëŠ” ì§€ë„ ë§ì´ í—·ê°ˆë ¸ë˜ ê¸°ì–µì´ ë‚©ë‹ˆë‹¤. 

ì €ëŠ” ì´ ë¬¸ì œë¥¼ ë™ì‘ê³¼ì •ì„ ì‚´í´ë´„ìœ¼ë¡œì¨ í•´ê²° í–ˆìŠµë‹ˆë‹¤. 


# Spring Security ë™ì‘ ê³¼ì •

ìš°ì„  ëª¨ë“  ìš”ì²­ì€ FilterChain ì„ í†µí•´ì„œ ì „ë‹¬ ë©ë‹ˆë‹¤. FilterChain ì—ì„œ DelegatingFilterProxy ì˜ ì˜ì—­ìœ¼ë¡œ ìš”ì²­ì´ ì „ë‹¬ë˜ë©´, SecurityFilterChain ì´ ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ê° Filter ë“¤ì—ê²Œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. 

ìš”ì²­ì˜ ì„±ê²©ì— ë”°ë¼ Filter ë“¤ì´ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤. Logout ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” LogoutFilter ë¥¼ í•œë²ˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. 

```java

private SecurityContextHolderStrategy securityContextHolderStrategy = SecurityContextHolder
	.getContextHolderStrategy();

private RequestMatcher logoutRequestMatcher;

private final LogoutHandler handler;

private final LogoutSuccessHandler logoutSuccessHandler;

// ìƒëµ

private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain)
		throws IOException, ServletException {
	if (requiresLogout(request, response)) {
		Authentication auth = this.securityContextHolderStrategy.getContext().getAuthentication();
		if (this.logger.isDebugEnabled()) {
			this.logger.debug(LogMessage.format("Logging out [%s]", auth));
		}
		this.handler.logout(request, response, auth);
		this.logoutSuccessHandler.onLogoutSuccess(request, response, auth);
		return;
	}
	chain.doFilter(request, response);
}
```

ë§Œì•½ ë¡œê·¸ì•„ì›ƒ ìš”ì²­ì´ë¼ë©´, `LogoutHander` ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¡œê·¸ì•„ì›ƒ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³ , ì„±ê³µí•œë‹¤ë©´ `logoutSuccessHandler` ë¥¼ í˜¸ì¶œí•´ í›„ì²˜ë¦¬ë¥¼ í•©ë‹ˆë‹¤. 
ë¡œê·¸ì•„ì›ƒ ìš”ì²­ì´ ì•„ë‹ˆë¼ë©´ FilerChain ì˜ doFilter ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë‹¤ìŒ Filter ì—ê²Œ ìš”ì²­ì„ ë„˜ê¸°ì£ . 

# Spring Security ê°€ ì§€ì›í•˜ëŠ” ì¸ì¦ ë°©ì‹ë“¤



# Outro

# Reference

- [https://spring.io/projects/spring-security](https://spring.io/projects/spring-security)